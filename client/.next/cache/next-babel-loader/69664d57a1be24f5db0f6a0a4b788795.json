{"ast":null,"code":"var _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar express = require('express');\n\nvar next = require('next');\n\nmodule.exports = function _callee() {\n  var _ref,\n      _ref$beforeNext,\n      beforeNext,\n      _ref$dir,\n      dir,\n      dev,\n      port,\n      app,\n      handle,\n      server,\n      _args = arguments;\n\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _ref = _args.length > 0 && _args[0] !== undefined ? _args[0] : {}, _ref$beforeNext = _ref.beforeNext, beforeNext = _ref$beforeNext === void 0 ? function () {} : _ref$beforeNext, _ref$dir = _ref.dir, dir = _ref$dir === void 0 ? '.' : _ref$dir;\n          dev = true;\n          port = process.env.PORT || 3000;\n          app = next({\n            dev: dev,\n            dir: dir\n          });\n          handle = app.getRequestHandler();\n          server = express();\n          _context.next = 8;\n          return _regeneratorRuntime.awrap(app.prepare());\n\n        case 8:\n          _context.next = 10;\n          return _regeneratorRuntime.awrap(beforeNext(server));\n\n        case 10:\n          server.use(express[\"static\"](\"\".concat(dir, \"/static\")));\n          server.get('*', function (req, res) {\n            return handle(req, res);\n          });\n          server.listen(port, function (err) {\n            if (err) throw err;\n            console.log(\"> Ready on port: \".concat(port));\n          });\n\n        case 13:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};","map":{"version":3,"sources":["/Users/minhnguyen/Code/covid-tracking-api/client/pages/index.js"],"names":["express","require","next","module","exports","beforeNext","dir","dev","port","process","env","PORT","app","handle","getRequestHandler","server","prepare","use","get","req","res","listen","err","console","log"],"mappings":";;AAAA,IAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,IAAMC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAApB;;AACAE,MAAM,CAACC,OAAP,GAAiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,yEAED,EAFC,yBACfC,UADe,EACfA,UADe,gCACF,YAAM,CAAG,CADP,oCAEfC,GAFe,EAEfA,GAFe,yBAET,GAFS;AAITC,UAAAA,GAJS;AAKTC,UAAAA,IALS,GAKFC,OAAO,CAACC,GAAR,CAAYC,IAAZ,IAAoB,IALlB;AAMTC,UAAAA,GANS,GAMHV,IAAI,CAAC;AAAEK,YAAAA,GAAG,EAAHA,GAAF;AAAOD,YAAAA,GAAG,EAAHA;AAAP,WAAD,CAND;AAOTO,UAAAA,MAPS,GAOAD,GAAG,CAACE,iBAAJ,EAPA;AAQTC,UAAAA,MARS,GAQAf,OAAO,EARP;AAAA;AAAA,2CASTY,GAAG,CAACI,OAAJ,EATS;;AAAA;AAAA;AAAA,2CAUTX,UAAU,CAACU,MAAD,CAVD;;AAAA;AAWfA,UAAAA,MAAM,CAACE,GAAP,CAAWjB,OAAO,UAAP,WAAkBM,GAAlB,aAAX;AACAS,UAAAA,MAAM,CAACG,GAAP,CAAW,GAAX,EAAgB,UAACC,GAAD,EAAMC,GAAN;AAAA,mBAAcP,MAAM,CAACM,GAAD,EAAMC,GAAN,CAApB;AAAA,WAAhB;AACAL,UAAAA,MAAM,CAACM,MAAP,CAAcb,IAAd,EAAoB,UAAAc,GAAG,EAAI;AACzB,gBAAIA,GAAJ,EAAS,MAAMA,GAAN;AACTC,YAAAA,OAAO,CAACC,GAAR,4BAAgChB,IAAhC;AACD,WAHD;;AAbe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAjB","sourcesContent":["const express = require('express');\nconst next = require('next');\nmodule.exports = async function ({\n  beforeNext = () => { },\n  dir = '.' } = {}\n) {\n  const dev = process.env.NODE_ENV === 'development';\n  const port = process.env.PORT || 3000;\n  const app = next({ dev, dir });\n  const handle = app.getRequestHandler();\n  const server = express();\n  await app.prepare();\n  await beforeNext(server);\n  server.use(express.static(`${dir}/static`));\n  server.get('*', (req, res) => handle(req, res));\n  server.listen(port, err => {\n    if (err) throw err;\n    console.log(`> Ready on port: ${port}`);\n  });\n};\n"]},"metadata":{},"sourceType":"script"}